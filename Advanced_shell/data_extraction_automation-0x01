#!/bin/bash

# Define the input file from the previous task
DATA_FILE="data.json"

# Use jq to extract the raw, lowercase values on a single line.
EXTRACTED_DATA=$(jq -r '[.name, .height, .weight, .types[0].type.name] | join(" ")' "$DATA_FILE")

# Use sed to perform string substitution to capitalize "Pikachu" and "Electric".
CORRECTED_DATA=$(echo "$EXTRACTED_DATA" | sed 's/pikachu/Pikachu/; s/electric/Electric/')

# Use awk to do the unit conversion and format the final output string.
echo "$CORRECTED_DATA" | awk '{
    # Convert height from decimeters to meters
    height_m = $2 / 10
    # Convert weight from hectograms to kilograms
    weight_kg = $3 / 10

    # Use printf to format the final output string precisely
    printf "%s is of type %s, weighs %skg, and is %.1fm tall.\n", $1, $4, weight_kg, height_m
}'

